<%- title(@query ? "Search for #{@query}" : "Assets") -%>
<%= render :partial => 'search_form' %>

<%- if @assets.empty? -%>
<h2>Nothing found.</h2>
<%- else -%>
<p id="record_count">Showing records <strong><%= @search_object.offset + 1 %></strong>â€“<strong><%= @search_object.offset + @assets.size %></strong> of <strong><%= @search_object.total_entries %></strong>.</p>
<ul>
  <%- @assets.each do |asset| -%>
    <li class="asset-summary" id="asset_<%= asset.id %>">
      <%= h asset.identifiers.map{|id| id.identifier}.join(" / ") %>
      <%= link_to "view", asset_url(asset.uuid) if authorized?('show', asset) %>
      <%= link_to "xml", formatted_asset_url(asset.uuid, "xml") if authorized?('show', asset) %>
      <%= link_to "edit", edit_asset_url(asset) if authorized?('edit', asset) %>
      <%= link_to_remote "destroy", :url => { :action => 'destroy', :id => asset.id }, :method => :delete, :confirm => "Are you sure you wish to delete #{asset.title}?", :html => { :class => "destroy_link" } if authorized?('destroy', asset)%>
      <br />
      <strong><%= h asset.title %></strong>
      <ul>
        <%- asset.instantiations.each do |instantiation| -%>
          <li>
            <%= h instantiation.summary %>
          </li>
        <%- end -%>
      </ul>
    </li>
  <%- end -%>
</ul>

<%= will_paginate @search_object %>
<%- end -%>
